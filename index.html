<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ - AI Agent Interface</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #f1f5f9;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; padding: 40px 20px; margin-bottom: 30px; }
        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #38bdf8, #818cf8);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(56, 189, 248, 0.2);
        }
        .subtitle { 
            font-size: 1.2rem; 
            color: #94a3b8; 
            max-width: 700px; 
            margin: 0 auto 30px;
            line-height: 1.6;
        }

        /* FAQ Section */
        .faq-section {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(56, 189, 248, 0.1);
        }
        
        .faq-title {
            color: #38bdf8;
            font-size: 2rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .faq-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .faq-item {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(56, 189, 248, 0.1);
        }
        
        .faq-item:hover {
            background: rgba(15, 23, 42, 0.9);
            border-color: rgba(56, 189, 248, 0.3);
            transform: translateY(-2px);
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: #f1f5f9;
        }
        
        .faq-icon {
            color: #38bdf8;
            transition: transform 0.3s ease;
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            color: #cbd5e1;
            line-height: 1.6;
            margin-top: 0;
        }
        
        .faq-item.active .faq-answer {
            max-height: 300px;
            margin-top: 15px;
        }
        
        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        /* Info Cards */
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 80px;
        }
        
        .card {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(56, 189, 248, 0.1);
            transition: 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }
        
        .card h2 {
            color: #38bdf8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }
        
        .card p {
            color: #cbd5e1;
            line-height: 1.6;
        }

        /* Floating AI Button */
        .ai-agent-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(56, 189, 248, 0.5);
            transition: 0.3s ease;
            animation: pulse 2s infinite;
        }
        
        .ai-agent-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(56, 189, 248, 0.7);
        }
        
        .ai-agent-button i {
            font-size: 28px;
            color: white;
        }
        
        .notification {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 22px;
            height: 22px;
            background: #ef4444;
            border-radius: 50%;
            color: white;
            font-size: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            animation: bounce 1s infinite alternate;
        }

        /* Chat Modal */
        .chat-modal {
            position: fixed;
            bottom: 110px;
            right: 30px;
            width: 380px;
            height: 500px;
            background: rgba(15, 23, 42, 0.98);
            border-radius: 20px;
            z-index: 1001;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid rgba(56, 189, 248, 0.2);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }
        
        .chat-modal.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }
        
        .chat-header {
            background: linear-gradient(to right, #0f172a, #1e293b);
            padding: 20px;
            border-bottom: 1px solid rgba(56, 189, 248, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .agent-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .agent-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 22px;
        }
        
        .agent-status {
            color: #10b981;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 22px;
            cursor: pointer;
        }
        
        .chat-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .message {
            max-width: 80%;
            padding: 15px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.4;
        }
        
        .agent-message {
            background: rgba(56, 189, 248, 0.15);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            background: rgba(129, 140, 248, 0.2);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        .timestamp {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 5px;
            text-align: right;
        }
        
        .chat-footer {
            padding: 20px;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px 15px;
            border-radius: 12px;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(56, 189, 248, 0.3);
            color: #f1f5f9;
            font-size: 14px;
        }
        
        .chat-input:focus {
            outline: none;
            border-color: #38bdf8;
        }
        
        .send-btn {
            background: linear-gradient(to right, #38bdf8, #818cf8);
            border: none;
            border-radius: 12px;
            width: 50px;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: 0.3s ease;
        }
        
        .send-btn:hover {
            opacity: 0.9;
        }
        
        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background: rgba(56, 189, 248, 0.15);
            padding: 15px;
            border-radius: 18px;
        }
        
        .typing-indicator.active {
            display: block;
        }
        
        .typing-dots {
            display: flex;
            gap: 5px;
        }
        
        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #38bdf8;
            opacity: 0.4;
            animation: typing 1.4s infinite;
        }
        
        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-5px); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.4; transform: translateY(0); }
            30% { opacity: 1; transform: translateY(-5px); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 2.2rem; }
            .subtitle { font-size: 1rem; }
            .faq-section { padding: 20px; }
            .info-cards { grid-template-columns: 1fr; }
            .chat-modal {
                width: calc(100vw - 40px);
                right: 20px;
                bottom: 100px;
                height: 450px;
            }
            .ai-agent-button {
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1><i class="fas fa-robot"></i> FAQ & AI Assistant</h1>
            <p class="subtitle">
                Click the AI assistant button to ask any question directly. 
                Our AI agent is powered by Gemini and ready to help 24/7.
            </p>
        </header>

        
        <!-- Info Cards -->
        <div class="info-cards">
            <div class="card">
                <h2><i class="fas fa-brain"></i> Intelligent Assistance</h2>
                <p>Powered by Google's Gemini model, our AI agent provides intelligent, context-aware responses to your questions.</p>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-bolt"></i> Instant Responses</h2>
                <p>Get answers in real-time. The AI processes your queries instantly and provides accurate, helpful responses.</p>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-shield-alt"></i> Secure & Private</h2>
                <p>Your conversations are encrypted and not permanently stored. We prioritize your privacy and data security.</p>
            </div>
        </div>
    </div>

    <!-- Floating AI Button -->
    <div class="ai-agent-button" id="aiAgentButton">
        <i class="fas fa-robot"></i>
        <div class="notification" id="notification">1</div>
    </div>

    <!-- Chat Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <div class="agent-info">
                <div class="agent-avatar"><i class="fas fa-robot"></i></div>
                <div>
                    <h3>AI Assistant</h3>
                    <div class="agent-status">
                        <div class="status-dot"></div>
                        <span>Online</span>
                    </div>
                </div>
            </div>
            <button class="close-btn" id="closeChat"><i class="fas fa-times"></i></button>
        </div>

        <div class="chat-body" id="chatBody">
            <div class="message agent-message">
                Hello! I'm Lora, Umbrella Labs' AI assistant. 
                <div class="timestamp">Just now</div>
            </div>
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>

        <div class="chat-footer">
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your question here..." autocomplete="off">
                <button class="send-btn" id="sendMessage"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const aiAgentButton = document.getElementById('aiAgentButton');
        const chatModal = document.getElementById('chatModal');
        const closeChat = document.getElementById('closeChat');
        const chatBody = document.getElementById('chatBody');
        const chatInput = document.getElementById('chatInput');
        const sendMessage = document.getElementById('sendMessage');
        const typingIndicator = document.getElementById('typingIndicator');
        const notification = document.getElementById('notification');
        const faqItems = document.querySelectorAll('.faq-item');

        // FAQ Toggle Functionality
        faqItems.forEach(item => {
            item.addEventListener('click', () => {
                // Close other FAQ items
                faqItems.forEach(otherItem => {
                    if (otherItem !== item && otherItem.classList.contains('active')) {
                        otherItem.classList.remove('active');
                    }
                });
                
                // Toggle current FAQ item
                item.classList.toggle('active');
            });
        });

        // Replace with your actual Vercel URL
        const API_URL = 'https://faq-eta-three.vercel.app/api/chat';

        
        // For testing, you can use this demo mode if you don't have your API deployed yet
        const DEMO_MODE = false; // Set to false when your API is ready

        // Generate unique session ID for user
        const sessionId = 'web_user_' + Date.now();

        // OPEN CHAT
        aiAgentButton.addEventListener('click', () => {
            chatModal.classList.add('active');
            notification.style.display = 'none';
            setTimeout(() => chatInput.focus(), 300);
        });

        // CLOSE CHAT
        closeChat.addEventListener('click', () => {
            chatModal.classList.remove('active');
        });

        // Close chat when clicking outside (optional)
        document.addEventListener('click', (e) => {
            if (!chatModal.contains(e.target) && 
                !aiAgentButton.contains(e.target) && 
                chatModal.classList.contains('active')) {
                chatModal.classList.remove('active');
            }
        });

        // ADD MESSAGE TO CHAT
        function addMessageToChat(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender === 'user' ? 'user-message' : 'agent-message');
            
            const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            messageDiv.innerHTML = `${text}<div class="timestamp">${timestamp}</div>`;
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // DEMO RESPONSES (for testing)
        const demoResponses = [
            "I'm an AI assistant powered by Gemini. I can help answer your questions, provide explanations, and assist with various tasks.",
            "I understand you're asking about our services. I can provide detailed information about how the AI agent works and what it can do for you.",
            "That's an interesting question! I'd be happy to help you with that. Could you provide a bit more context so I can give you the best answer?",
            "Based on common queries, I recommend checking our FAQ section above for quick answers to frequently asked questions.",
            "I'm here to help 24/7! Feel free to ask me anything, whether it's about technology, learning, creative projects, or general knowledge."
        ];

        // SEND MESSAGE TO BACKEND
        async function sendUserMessage() {
            const messageText = chatInput.value.trim();
            if (!messageText) return;

            // Add user message to chat
            addMessageToChat(messageText, 'user');
            chatInput.value = '';
            
            // Show typing indicator
            typingIndicator.classList.add('active');
            
            try {
                let aiResponse;
                
                if (DEMO_MODE) {
                    // Demo mode - use random responses
                    await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API delay
                    const randomResponse = demoResponses[Math.floor(Math.random() * demoResponses.length)];
                    aiResponse = randomResponse;
                } else {
                    // Real API call
                    const response = await fetch(API_URL, {
                        method: "POST",
                        headers: { 
                            "Content-Type": "application/json",
                            "Accept": "application/json"
                        },
                        body: JSON.stringify({ 
                            message: messageText, 
                            session_id: sessionId 
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (data.error) {
                        throw new Error(data.error);
                    }
                    
                    aiResponse = data.response || data.answer || "I received your message but couldn't process it properly.";
                }

                // Hide typing indicator and add AI response
                typingIndicator.classList.remove('active');
                addMessageToChat(aiResponse, 'agent');

            } catch (error) {
                // Hide typing indicator
                typingIndicator.classList.remove('active');
                
                // Show error message
                console.error('Chat error:', error);
                
                let errorMessage = "âš ï¸ Sorry, I'm having trouble connecting to the AI service. ";
                
                if (error.message.includes('Failed to fetch')) {
                    errorMessage += "Please check your internet connection.";
                } else if (error.message.includes('404')) {
                    errorMessage += "The AI service endpoint is not configured. Please update the API_URL in the script.";
                } else {
                    errorMessage += `Error: ${error.message}`;
                }
                
                addMessageToChat(errorMessage, 'agent');
                
                // Suggest demo mode
                if (!DEMO_MODE) {
                    addMessageToChat("ðŸ’¡ Tip: You can enable DEMO_MODE in the script for testing without an API.", 'agent');
                }
            }
        }

        // EVENT LISTENERS
        sendMessage.addEventListener('click', sendUserMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendUserMessage();
            }
        });

        // FAQ Quick Action - Click on FAQ answer to send to AI
        document.querySelectorAll('.faq-answer').forEach(answerElement => {
            answerElement.addEventListener('click', (e) => {
                if (e.target === answerElement) {
                    const faqText = answerElement.textContent.trim();
                    if (faqText.length > 10) {
                        // Open chat if not open
                        if (!chatModal.classList.contains('active')) {
                            chatModal.classList.add('active');
                            notification.style.display = 'none';
                        }
                        
                        // Add FAQ text to input
                        chatInput.value = `About: ${faqText.substring(0, 100)}...`;
                        chatInput.focus();
                    }
                }
            });
        });

        // Auto-hide notification after 5 seconds
        setTimeout(() => {
            notification.style.display = 'none';
        }, 5000);

        // Welcome message
        console.log('AI Agent Interface loaded successfully!');
        console.log('Update the API_URL variable with your Vercel app URL.');
        console.log('Current API URL:', API_URL);
    </script>
</body>
</html>



